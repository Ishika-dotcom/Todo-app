<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Todo List</title>
    <!-- Bootstrap 4 CDN -->
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="/">Todo App</a>
    <div class="ml-auto">
        <a href="/new" class="btn btn-success btn-sm">+ Add Task</a>
    </div>
</nav>

<div class="container mt-4">
    <h2 class="mb-4 text-center">Your Tasks</h2>

    <!-- Flash message (optional) -->
    <div th:if="${message}" class="alert alert-success" th:text="${message}"></div>

    <!-- Task Table -->
    <table class="table table-striped table-bordered shadow-sm">
        <thead class="thead-dark">
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Description</th>
            <th>Created At</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="todo : ${todos}">
            <td th:text="${todo.id}"></td>
            <td th:text="${todo.title}"></td>
            <td th:text="${todo.description}"></td>
            <td th:text="${#temporals.format(todo.createdAt, 'dd-MMM-yyyy HH:mm')}"></td>
            <td th:text="${todo.status}"></td>

            <td>
                <a th:href="@{/edit/{id}(id=${todo.id})}" class="btn btn-warning btn-sm mr-1">Edit</a>
                <a th:href="@{/delete/{id}(id=${todo.id})}" class="btn btn-danger btn-sm mr-1">Delete</a>
                <a th:if="${todo.status == 'PENDING'}"
                   th:href="@{/done/{id}(id=${todo.id})}"
                   class="btn btn-success btn-sm">Mark Done</a>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Filter Buttons -->
    <div class="mt-4 text-center">
        <a href="/" class="btn btn-secondary btn-sm">All</a>
        <a href="/filter/PENDING" class="btn btn-info btn-sm">Pending</a>
        <a href="/filter/DONE" class="btn btn-success btn-sm">Done</a>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


